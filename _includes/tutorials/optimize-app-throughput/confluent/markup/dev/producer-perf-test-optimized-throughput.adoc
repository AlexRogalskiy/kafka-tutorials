Now rerun the Kafka producer performance test using optimized configuration values.
This test will send the same number of records of the same size.

The parameters to tweak include:

- `batch.size`: increase to 100000–200000 (default 16384)
- `linger.ms`: increase to 10–100 (default 0)
- `compression.type=lz4` (default `none`, i.e., no compression)
- `acks=1` (default 1)
- `buffer.memory`: increase if there are a lot of partitions (default 33554432)

For a detailed explanation of why these matter, please see link:https://www.confluent.io/resources/recommendations-developers-using-confluent-cloud/[Recommendations for Developers using Confluent Cloud]. 

+++++
<pre class="snippet"><code class="shell">{% include_raw tutorials/optimize-app-throughput/confluent/code/tutorial-steps/dev/producer-perf-test-optimized-throughput.sh %}</code></pre>
+++++

Note the output results.
They should resemble something like (your results will vary):

```
...
5000 records sent, 1172.332943 records/sec (5.59 MB/sec), 1369.09 ms avg latency, 2739.00 ms max latency, 1269 ms 50th, 2246 ms 95th, 2662 ms 99th, 2739 ms 99.9th.
```

Note the last line: the throughput being `1172.332943 records/sec (5.59 MB/sec)`.
Your results will vary, but what you should see is a marked improvement over the baseline.
In the case of the results shown in this tutorial, these modified configuration had more than a 3x throughput.
